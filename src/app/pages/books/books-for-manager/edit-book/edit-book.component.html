<div>
  <mat-card>
    <mat-card-title>
      <h2>
        Create book
      </h2>
    </mat-card-title>
    <mat-card-content>
      <form [formGroup]="createBook" name="createBook" (ngSubmit)="submit(createBook.value)">
        <div class=book-name>
          <mat-form-field appearance="outline">
            <mat-label>Name</mat-label>
            <input type="text" matInput required maxlength="100" minlength="1" placeholder="book name"
              formControlName="name">
          </mat-form-field>
          <mat-error *ngIf="!createBook.controls['name'].valid && createBook.controls['name'].dirty">
            Bookname is required
          </mat-error>
        </div>
        <div class=book-price>
          <mat-form-field appearance="outline">
            <mat-label>Price</mat-label>
            <input type="number" matInput min="0" required placeholder="book price" formControlName="price">
          </mat-form-field>
          <mat-error *ngIf="!createBook.controls['price'].valid && createBook.controls['price'].dirty">
            Book price is required
          </mat-error>
          <mat-error *ngIf="createBook.controls['price'].value < 0 && createBook.controls['price'].valid">
            Book price must be more than zero
          </mat-error>
        </div>
        <div class="book-description">
          <mat-form-field appearance="outline">
            <mat-label>Description</mat-label>
            <textarea matInput required minlength="50" placeholder="Book description"
              formControlName="description"></textarea>
          </mat-form-field>
          <mat-error *ngIf="!createBook.controls['description'].valid && createBook.controls['description'].dirty">
            Description is required
          </mat-error>
        </div>
        <div  class="AddImage mb-4">
          <div class="pt-2 ps-2"> 
            <h3 class="ml-2 mb-1">Add image</h3>
          </div>   
          <a mat-button (click)="addImage()">
            <mat-icon>add_circle_outline</mat-icon>
            New image
          </a>
          <div class="row col-12 book-image pb-3" formArrayName="imageFiles"
            *ngFor="let imageFile of imageFiles.controls;let i=index">
            <div class="col-9">
              <input type="file" required multiple requiredFileType="image/png" [formControlName]="i">
            </div>
            <div class="col-3">
              <mat-icon (click)="removeImage(i)">remove_circle_outline</mat-icon>
            </div>
          </div>
        </div>
        <div class="AddBook">
          <div class="pt-2 ps-2" >
            <div class="fonk" >Add Book</div>
          </div> 
          <div class="book-book pb-3 ps-2">
            <input class="ml-1" type="file" required formControlName="book">
          </div>
        </div>
        <div class="book-genres">
          <mat-form-field appearance="outline">
            <mat-label>Genres</mat-label>
            <mat-chip-list #genreList aria-label="Genres selection">
              <mat-chip *ngFor="let genre of genres" (removed)="removeGenre(genre)">
                {{genre}}
                <button matChipRemove>
                  <mat-icon>cancel</mat-icon>
                </button>
              </mat-chip>
              <input #genreInput placeholder="New genre..." #fruitInput [formControl]="genreCtrl" [matAutocomplete]="auto"
                [matChipInputFor]="genreList" [matChipInputSeparatorKeyCodes]="separatorKeysCodesGenre"
                (matChipInputTokenEnd)="addGenre($event)">
            </mat-chip-list>
            <mat-autocomplete #auto="matAutocomplete" (optionSelected)="selectedGenre($event)">
              <mat-option *ngFor="let genre of filteredGenres | async" [value]="genre">
                {{genre}}
              </mat-option>
            </mat-autocomplete>
          </mat-form-field>
        </div>

        <div class="book-authors">
          <mat-form-field appearance="outline">
            <mat-label>Authors</mat-label>
            <mat-chip-list #authorList aria-label="Author selection">
              <mat-chip *ngFor="let author of authors" (removed)="removeAuthor(author)">
                {{author}}
                <button matChipRemove>
                  <mat-icon>cancel</mat-icon>
                </button>
              </mat-chip>
              <input placeholder="New author..." #authorInput [formControl]="authorCtrl" 
                [matChipInputFor]="authorList" [matChipInputSeparatorKeyCodes]="separatorKeysCodesAuthor"
                (matChipInputTokenEnd)="addAuthor($event)">
            </mat-chip-list>
            <mat-autocomplete #auto="matAutocomplete" (optionSelected)="selectedAuthor($event)">
              <mat-option *ngFor="let author of filteredAuthor | async" [value]="author">
                {{author}}
              </mat-option>
            </mat-autocomplete>
          </mat-form-field>
        </div>


        <div class="d-flex justify-content-center">
          <button type="submit" mat-flat-button color="primary" [disabled]="createBook.invalid">
            <mat-icon>add_circle</mat-icon> ADD BOOK
          </button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>
</div>